class t{constructor(t){this.audioPlayer=t,this.audio=this.audioPlayer.querySelector("audio"),this.audio.load(),this.audio.addEventListener("loadedmetadata",(()=>{console.log(this.audio.duration),this.audioDuration=this.audioPlayer.querySelector(".duration"),this.audioDuration.textContent=this.toTime(this.audio.duration),this.audioControls=this.audioPlayer.querySelector(".audio-controls"),this.playpauseElement=this.audioControls.querySelector(".playpause"),this.playpauseIcon=this.playpauseElement.querySelector(".icon"),this.playpauseElement.addEventListener("click",(t=>{this.playPause()})),this.currentTimeElement=this.audioControls.querySelector(".current"),this.audio.addEventListener("timeupdate",(t=>{this.timeUpdate()})),this.audio.addEventListener("ended",(t=>{this.audio.currentTime=0,this.audio.pause()}))}),!1)}playPause(){this.audio.paused?(this.audio.play(),this.audioControls.dataset.state="playing",this.playpauseIcon.textContent="▮▮"):(this.audioControls.dataset.state="paused",this.audio.pause(),this.playpauseIcon.textContent="▶")}toTime(t){let e=Math.floor(t/3600),a=Math.floor((t-3600*e)/60),s=Math.floor(t-3600*e-60*a);return s<10&&(s="0"+s),a+":"+s}timeUpdate(){this.currentTimeElement.textContent=this.toTime(this.audio.currentTime)}}class e{constructor(t){this.wrapper=t,this.parent=this.wrapper.closest("figure"),this.toggle=this.wrapper.querySelector("button"),this.parent.dataset.state="collapsed",this.toggle.addEventListener("click",(t=>{this.parent.dataset.state="collapsed"==this.parent.dataset.state?"expanded":"collapsed"}))}}class a{constructor(t){this.gallery=t,this.swiper=new Swiper(".swiper",{loop:!0,preloadImages:!1,lazy:{loadPrevNext:!0,loadPrevNextAmount:1},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}),this.thumbs=this.gallery.querySelectorAll(".gallery-thumb"),this.closeButton=this.gallery.querySelector(".close"),this.state="closed",this.thumbs.forEach((t=>{t.addEventListener("click",(e=>{const a=t.dataset.index;this.open(a)}))})),this.closeButton.addEventListener("click",(t=>{this.close()}))}close(){this.state="closed",document.documentElement.dataset.galleryState=this.state}open(t){this.state="open",this.swiper.slideTo(t,0,!0),document.documentElement.dataset.galleryState=this.state}}document.querySelectorAll(".audio-player").forEach((e=>{new t(e)}));document.querySelectorAll(".image-details").forEach((t=>{new e(t)}));const s=document.forms.subscribe,i=document.getElementById("message-button");s&&i&&(i.addEventListener("click",(t=>{"subscribe"==s.dataset.state&&(s.dataset.state="form",s.querySelector('[name="email"]').focus()),setTimeout((()=>{i.type="submit"}),1)})),s.addEventListener("submit",(t=>{t.preventDefault(),"form"==s.dataset.state&&(document.activeElement.blur(),s.dataset.state="thank-you")})));const o=document.querySelector(".weather");o&&async function(t){const e=await fetch(t);return await e.json()}("https://api.openweathermap.org/data/2.5/weather?zip=05478&units=imperial&appid=24c8c0ba644f296178056dc416997e4c").then((t=>{let e,a=Math.floor(Date.now()/1e3),s=a>=t.sys.sunrise&&a<=t.sys.sunset?"today":"tonight",i=parseInt(t.main.temp);i>=80?e="hot":i>=60&&i<80?e="warm":i>=30&&i<60?e="cool":i>=0<30?e="cold":i<0&&(e="really cold"),t.weather[0].icon&&async function(t){const e=await fetch(t);return await e.text()}("/assets/img/weather/"+t.weather[0].icon+".svg").then((a=>{let n=`\n\t\t\t\t\t<div class="icon">${a}</div>\n\t\t\t\t\t<div class="temp">${i}°</div>\n\t\t\t\t\t<div class="description">It's ${e} with ${t.weather[0].description} in Vermont ${s}.</div>\n\t\t\t\t`;o.innerHTML=n}))}));const n=document.querySelector(".gallery");n&&new a(n);
